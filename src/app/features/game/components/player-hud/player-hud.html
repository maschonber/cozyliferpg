<div class="player-hud">
  @if (player(); as p) {
    <div class="hud-container">
      <!-- Day & Time -->
      <div class="hud-item day-time">
        <mat-icon class="hud-icon">calendar_today</mat-icon>
        <div class="hud-content">
          <span class="hud-value">{{ p.currentTime }} ({{ getTimeSlotLabel(p.currentTime) }})</span>
        </div>
      </div>

      <!-- Location (Phase 3) -->
      <div class="hud-item location">
        <mat-icon class="hud-icon">place</mat-icon>
        <div class="hud-content">
          <span class="hud-value">{{ getLocationName(p.currentLocation) }}</span>
        </div>
      </div>

      <!-- Money -->
      <div class="hud-item money">
        <mat-icon class="hud-icon">attach_money</mat-icon>
        <div class="hud-content">
          <span class="hud-value">${{ p.money }}</span>
        </div>
      </div>

      <!-- Energy -->
      <div class="hud-item energy">
        <mat-icon class="hud-icon">bolt</mat-icon>
        <div class="hud-content">
          <span class="hud-value">{{ p.currentEnergy }}/{{ p.maxEnergy }}</span>
          <mat-progress-bar
            [mode]="'determinate'"
            [value]="getEnergyPercentage(p.currentEnergy, p.maxEnergy)"
            [color]="getEnergyColor(p.currentEnergy)"
            class="energy-bar">
          </mat-progress-bar>
        </div>
      </div>

      <!-- Debug Menu -->
      <div class="hud-item debug-menu">
        <button
          mat-icon-button
          [matMenuTriggerFor]="debugMenu"
          matTooltip="Debug Menu"
          class="debug-menu-button">
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #debugMenu="matMenu">
          <button mat-menu-item (click)="onResetPlayer()">
            <mat-icon color="warn">refresh</mat-icon>
            <span>Reset Progress</span>
          </button>
        </mat-menu>
      </div>
    </div>
  }

  @if (playerLoading()) {
    <div class="hud-container loading">
      <span class="hud-label">Loading player data...</span>
    </div>
  }
</div>
