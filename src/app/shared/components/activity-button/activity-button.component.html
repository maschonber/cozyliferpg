<button
  mat-raised-button
  class="activity-button"
  [class.positive]="variant === 'positive'"
  [class.negative]="variant === 'negative'"
  [class.unavailable]="!isAvailable()"
  [disabled]="disabled || !isAvailable()"
  (click)="onClick()">
  <div class="activity-content">
    <div class="activity-header">
      <span class="activity-name">
        {{ activity.name }}
        @if (availability?.endsAfterMidnight) {
          <mat-icon class="warning-icon" matTooltip="Ends after midnight">warning</mat-icon>
        }
      </span>
    </div>

    <!-- Costs -->
    <div class="activity-costs">
      <mat-chip class="cost-chip time">
        <mat-icon>schedule</mat-icon>
        {{ formatTimeCost(activity.timeCost) }}
      </mat-chip>
      <mat-chip class="cost-chip energy" [class.negative-cost]="activity.energyCost < 0">
        <mat-icon>bolt</mat-icon>
        {{ activity.energyCost > 0 ? '+' : '' }}{{ activity.energyCost }}
      </mat-chip>
      @if (activity.moneyCost !== 0) {
        <mat-chip class="cost-chip money" [class.positive-cost]="activity.moneyCost > 0">
          <mat-icon>{{ activity.moneyCost > 0 ? 'add_circle' : 'remove_circle' }}</mat-icon>
          ${{ Math.abs(activity.moneyCost) }}
        </mat-chip>
      }
    </div>

    <!-- Optional Effects (for social activities) -->
    @if (effects && (effects.trust || effects.affection || effects.desire)) {
      <div class="activity-effects">
        @if (effects.trust) {
          <span [class.positive-effect]="effects.trust > 0"
                [class.negative-effect]="effects.trust < 0">
            Trust {{ effects.trust > 0 ? '+' : '' }}{{ effects.trust }}
          </span>
        }
        @if (effects.affection) {
          <span [class.positive-effect]="effects.affection > 0"
                [class.negative-effect]="effects.affection < 0">
            Affection {{ effects.affection > 0 ? '+' : '' }}{{ effects.affection }}
          </span>
        }
        @if (effects.desire) {
          <span [class.positive-effect]="effects.desire > 0"
                [class.negative-effect]="effects.desire < 0">
            Desire {{ effects.desire > 0 ? '+' : '' }}{{ effects.desire }}
          </span>
        }
      </div>
    }

    <!-- Unavailability reason -->
    @if (!isAvailable() && availability && availability.reason) {
      <div class="unavailable-reason">{{ availability.reason }}</div>
    }
  </div>
</button>
